(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-497e8e8c"],{"248a":function(e,t,r){"use strict";r("6027")},6027:function(e,t,r){},e80b:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("setting-layout",[r("form",{staticClass:"setting-container",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.updateUserInfo.apply(null,arguments)}}},[r("BaseInput",{staticClass:"setting-input",attrs:{"form-items":e.formItems},on:{"after-over-name-length":e.handleOverLength}}),r("BaseButton",{staticClass:"setting-button",attrs:{position:"right",mode:"action",isDisabled:e.isProcessing}},[e._v("儲存")])],1)])},n=[],a=r("1da1"),i=r("5530"),u=(r("96cf"),r("b0c0"),r("ff6e")),o=r("1527"),c=r("a64c"),m=r("4cce"),l=r("c968"),p=r("2f62"),f={name:"SettingPage",components:{SettingLayout:u["a"],BaseInput:o["a"],BaseButton:c["a"]},data:function(){return{formItems:[{id:0,name:"帳號",inputName:"account",value:"",isError:!1,isBlank:!1,prefix:"@"},{id:1,name:"名稱",inputName:"name",value:"",isError:!1},{id:2,name:"Email",inputName:"email",value:"",isError:!1},{id:3,name:"密碼",inputName:"password",type:"password",value:"",isError:!1,isBlank:!1},{id:4,name:"密碼確認",inputName:"passwordCheck",type:"password",value:"",isError:!1,isBlank:!1}],isAuthenticated:!1,isProcessing:!1}},computed:Object(i["a"])({},Object(p["c"])(["currentUser"])),created:function(){this.setUser()},methods:{handleOverLength:function(){this.formItems[1].isError=!0},setUser:function(){this.isAuthenticated=!0,this.formItems[0].value=this.currentUser.account,this.formItems[1].value=this.currentUser.name,this.formItems[2].value=this.currentUser.email},updateUserInfo:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n,a,i,u,o,c,p,f,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.isProcessing=!0,s=t.currentUser.id,n=t.formItems[0],a=t.formItems[1],i=t.formItems[2],u=t.formItems[3],o=t.formItems[4],!(n.value.length<1)){r.next=13;break}return n.isBlank=!0,r.abrupt("return");case 13:n.isBlank=!1;case 14:if(u.value===o.value){r.next=20;break}return u.isError=!0,o.isError=!0,r.abrupt("return");case 20:u.isError=!1,o.isError=!1;case 22:if(!(a.value.length>50)){r.next=24;break}return r.abrupt("return");case 24:return c=e.target,p=new FormData(c),p.append("introduction",t.currentUser.introduction),r.next=29,m["a"].update({userId:s,formData:p});case 29:if(f=r.sent,d=f.data,"error"!==d.status||"Account should be unique."!==d.message){r.next=37;break}return console.log(d.message),n.isError=!0,r.abrupt("return");case 37:if("error"!==d.status||"Email should be unique."!==d.message){r.next=43;break}return console.log(d.message),i.isError=!0,r.abrupt("return");case 43:l["b"].fireSuccess("更新成功"),t.$router.push("/main");case 45:r.next=51;break;case 47:r.prev=47,r.t0=r["catch"](0),console.log("Error",r.t0),l["b"].fireError("目前無法修改設定，請稍後再試");case 51:return r.prev=51,t.isProcessing=!1,r.finish(51);case 54:case"end":return r.stop()}}),r,null,[[0,47,51,54]])})))()}}},d=f,h=(r("248a"),r("2877")),g=Object(h["a"])(d,s,n,!1,null,"738abde0",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-497e8e8c.f3193d6a.js.map